#!/usr/bin/env bash

export PGHOST=hestia.raven.industries
export PGPORT=5433
export PGUSER=postgres

sql() {
  cat << EoSQL
-- Main Temperture Humidty Table
CREATE TABLE IF NOT EXISTS ecowitt_th (
  time        TIMESTAMPTZ       NOT NULL,
  location    TEXT              NOT NULL,
  temperature DOUBLE PRECISION  NULL,
  humidity    DOUBLE PRECISION  NULL,
  battery     INTEGER NULL
);

SELECT create_hypertable('ecowitt_th', 'time');

EoSQL
}

psql < <(sql)
